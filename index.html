<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Acaba Geçtim mi?</title>

<style>
* {
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    background: #111;
    margin: 0;
    padding: 15px;
    color: #fff;
}

.container {
    max-width: 600px;
    margin: auto;
    background: #1c1c1c;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.6);
}

h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #ffffff;
}

input {
    width: 100%;
    padding: 10px;
    margin: 6px 0;
    border-radius: 6px;
    border: none;
    background: #2b2b2b;
    color: #fff;
    font-size: 15px;
}

input::placeholder {
    color: #aaa;
}

button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
    background: #ffffff;
    color: #000;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
}

button:hover {
    background: #ddd;
}

.card {
    background: #242424;
    padding: 15px;
    margin-top: 12px;
    border-radius: 10px;
    border: 1px solid #333;
}

.card h3 {
    margin-top: 0;
    color: #f1f1f1;
}

.result {
    margin-top: 20px;
    padding: 15px;
    background: #202020;
    border-radius: 10px;
    border: 1px solid #333;
    line-height: 1.6;
}
</style>
</head>

<body>
<div class="container">
<h1>Acaba Geçtim mi?</h1>

<input id="vizeYuzde" type="number" placeholder="Vize Yüzdesi" value="40">
<input id="finalYuzde" type="number" placeholder="Final Yüzdesi" value="60">
<input id="finalGecme" type="number" placeholder="Final Geçme Notu" value="50">
<input id="dersSayisi" type="number" placeholder="Ders Sayısı">

<button onclick="dersleriOlustur()">Devam</button>

<div id="dersler"></div>

<button onclick="hesapla()">Hesapla</button>

<div id="sonuc" class="result"></div>
</div>

<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
}

function dersleriOlustur(){
    let adet = Number(document.getElementById("dersSayisi").value);
    let alan = document.getElementById("dersler");
    alan.innerHTML = "";

    for(let i = 0; i < adet; i++){
        alan.innerHTML += `
        <div class="card">
            <h3>${i+1}. Ders</h3>
            <input class="ad" placeholder="Ders Adı">
            <input class="vize" type="number" placeholder="Vize Notu">
            <input class="final" type="number" placeholder="Final Notu">
            <input class="akts" type="number" placeholder="AKTS">
        </div>`;
    }
}

function hesapla(){
    let vY = Number(document.getElementById("vizeYuzde").value);
    let fY = Number(document.getElementById("finalYuzde").value);
    let fG = Number(document.getElementById("finalGecme").value);

    let ad = document.querySelectorAll(".ad");
    let v = document.querySelectorAll(".vize");
    let f = document.querySelectorAll(".final");
    let a = document.querySelectorAll(".akts");

    let toplamOrt = 0;
    let toplamGano = 0;
    let toplamAkts = 0;
    let sonuc = "";

    for(let i = 0; i < ad.length; i++){
        let ort = (v[i].value * vY / 100) + (f[i].value * fY / 100);
        let harf = "FF", k = 0;
        let akts = Number(a[i].value);

        if (f[i].value >= fG) {
            if (ort >= 90) { harf = "AA"; k = 4; }
            else if (ort >= 80) { harf = "BA"; k = 3.5; }
            else if (ort >= 70) { harf = "BB"; k = 3; }
            else if (ort >= 60) { harf = "CB"; k = 2.5; }
            else if (ort >= 50) { harf = "CC"; k = 2; }
        }

        toplamOrt += ort * akts;
        toplamGano += k * akts;
        toplamAkts += akts;

        sonuc += `<b>${ad[i].value}</b><br>
                  Ortalama: ${ort.toFixed(2)}<br>
                  Harf Notu: ${harf}<br>
                  AKTS: ${akts}<hr>`;
    }

    document.getElementById("sonuc").innerHTML =
        sonuc +
        `<b>Genel Ortalama:</b> ${(toplamOrt/toplamAkts).toFixed(2)}<br>
         <b>GANO:</b> ${(toplamGano/toplamAkts).toFixed(2)}`;
}
</script>
</body>
</html>
